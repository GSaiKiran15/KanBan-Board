Question,Answer
"What is the complete Firebase auth flow?","Frontend: useUser() hook → user.getIdToken() → send in Authorization header. Backend: authenticate middleware → admin.auth().verifyIdToken() → sets req.user → route handler uses req.user.uid"
"Why use 'Authorization: Bearer <token>' format?","It's an HTTP standard (RFC 6750). Bearer means 'whoever holds this token'. Industry convention that all tools recognize (Postman, curl, etc.)"
"What are the 3 axios signatures for methods WITH body?","axios.post(url, data, config), axios.patch(url, data, config), axios.put(url, data, config). All have same pattern: url, data object, config object"
"What is the axios signature for GET?","axios.get(url, config) - only 2 parameters since GET has no body"
"Why is DELETE syntax weird in axios?","DELETE typically has no body, so it's axios.delete(url, config). But if you need body data, smuggle it inside config: {data: {stuff}, headers: {...}}"
"How do Firebase tokens expire and refresh?","Tokens expire after 1 hour. user.getIdToken() automatically refreshes expired tokens. That's why you call it fresh each time, not store it"
"When should you use useEffect for data fetching?","When: 1) Component mounts (initial load), 2) User navigates back (refresh data), 3) Dependencies change (e.g., switched projects), 4) Auth state changes (user logged in)"
"What is the useEffect data fetching formula?","1) Define async function, 2) Guard clauses (if !user return), 3) Set loading state, 4) Try-catch the fetch, 5) Finally clear loading, 6) Call function, 7) List dependencies"
"What should be in useEffect dependency array?","Everything your fetch function uses: typically [id, user, authLoading]. Rule: if fetch needs it, put it in dependencies"
"Why add 'if (!user) return' guard clauses?","Prevents crashes during: race conditions during logout, component still mounted while auth changing, edge cases during navigation. It's defensive coding"
"What's wrong with: useEffect(() => { const data = await axios.get() }, [])?","Can't use await directly in useEffect callback. Must define async function inside, then call it"
"Why does user.getIdToken() not show autocomplete?","TypeScript sees user as 'User | null'. It won't show methods until you handle the null case with a guard clause, optional chaining (?.), or non-null assertion (!)"
"What's the difference between Projects.jsx and Boards.jsx data loading?","Projects has useEffect to refetch on mount (handles stale data). Boards only used useLoaderData (doesn't refetch when navigating back)"
"Why do router loaders return empty arrays sometimes?","Race condition: loaders run immediately on page load, but Firebase auth takes time to initialize, so getAuth().currentUser is often null initially"
"What are the 3 common useEffect mistakes?","1) Fetching in render without useEffect (infinite loop), 2) Empty [] when you need params, 3) Not checking if user exists before using it"
"What are the 4 critical fixes for choppy Firebase auth?","1) Add Bearer token to API calls, 2) Redirect to /login when user is null in loaders, 3) Add error handling with try-catch in loaders, 4) Wait for Firebase auth to initialize with waitForAuth()"
"Why did projects disappear after login then navigation?","React Router loaders fired before Firebase auth initialized. getAuth().currentUser was null, loader returned [], page showed empty. Fix: waitForAuth() waits for auth before loading"
"What does waitForAuth() do?","Returns a Promise that resolves when Firebase auth finishes initializing. Uses onAuthStateChanged internally but for non-React contexts (loaders)"
"Why can't you use useUser() hook in loaders?","Loaders are plain JavaScript functions that run BEFORE React renders. Hooks only work inside React components. Loaders need waitForAuth() instead"
"When to use redirect() vs navigate()?","redirect() in loaders/actions (returns Response object). navigate() in components (from useNavigate hook). redirect works outside React, navigate needs component context"
"What's the pattern for checking user in event handlers?","if (isLoading || !user) return; const token = await user.getIdToken(); - Check both loading state AND user existence before calling getIdToken()"
"Why remove console.log from production?","1) Security risk (exposes data), 2) Performance impact, 3) Memory leaks (keeps references), 4) Unprofessional, 5) Makes real errors harder to find"
"What informal error messages did we fix?","'Bro get the hell outta here!' → 'Unauthorized: You do not own this project'. Changed all 'Bro/Bruh' messages to professional 'Unauthorized:' format"
"What belongs in .gitignore for this project?",".env, .env.*, credentials.json, node_modules. Already had node_modules, added env files and Firebase credentials. Use git rm --cached to untrack committed files"
"How to untrack a file already in git?","git rm --cached filename (keeps local file, removes from git). Then commit. .gitignore only prevents future tracking, doesn't untrack existing files"
"What's the difference between frontend and backend Firebase config?","Frontend: Public keys (VITE_FIREBASE_*) for browser login. Backend: Private service account (credentials.json) to verify tokens. Different purposes, both use Firebase"
"Why does server.js need process.env.PORT?","Render assigns a random port (not 8000). Your server must listen on process.env.PORT or it won't be accessible. Pattern: const PORT = process.env.PORT || 8000"
"What's CORS and why did we add it?","Cross-Origin Resource Sharing. Frontend (kanban-frontend.onrender.com) and backend (kanban-backend.onrender.com) are different domains. CORS allows frontend to call backend API"
"What's the CORS configuration pattern?","import cors from 'cors'. Define allowedOrigins array with frontend URLs. app.use(cors({origin: allowedOrigins, credentials: true})). Credentials needed for auth cookies/headers"
"Why use Internal Database URL on Render?","Internal URL connects services within Render's network (faster, free). External URL goes over internet (slower, may cost). Both services on Render = use Internal"
"What happens if FIREBASE_SERVICE_ACCOUNT is undefined?","JSON.parse(undefined) throws SyntaxError. Code needs fallback: check if env var exists, try credentials.json file, show error if neither, exit gracefully"
"What environment variables does backend need?","DB_HOST, DB_USER, DB_PASSWORD, DB_DATABASE, DB_PORT (5432), FIREBASE_SERVICE_ACCOUNT (JSON string), FRONTEND_URL, NODE_ENV (production)"
"What environment variables does frontend need?","VITE_FIREBASE_API_KEY, VITE_FIREBASE_AUTH_DOMAIN, VITE_FIREBASE_PROJECT_ID, VITE_FIREBASE_STORAGE_BUCKET, VITE_FIREBASE_MESSAGING_SENDER_ID, VITE_FIREBASE_APP_ID, VITE_API_URL"
"Why VITE_ prefix on frontend env vars?","Vite only exposes env vars with VITE_ prefix to browser (security). Without prefix, variable is undefined in build. import.meta.env.VITE_SOMETHING to access"
"What's the optimistic update + rollback pattern?","1) Update UI immediately, 2) Call API, 3) If API fails, rollback UI to previous state. Better UX than waiting, but needs error handling"
"Why is 'return error' in catch block useless?","Event handlers ignore return values. Error object gets returned to nowhere. Better: rollback state, show user feedback, or just empty catch block"
"What does 'Service is live' but connection fails mean?","Server started successfully but can't connect to database. Check: DB credentials correct? Using Internal URL? DB_PORT is 5432? Database service running?"
"Why hardcoded Firebase config doesn't work on Render?","Build process doesn't have access to .env.local file (it's gitignored). Must use import.meta.env.VITE_* to read from Render's environment variables"
"What's the pattern to use env vars in Vite?","const firebaseConfig = { apiKey: import.meta.env.VITE_FIREBASE_API_KEY, ... }. Don't hardcode strings, read from import.meta.env"
"How does Render auto-deploy work?","Connect GitHub repo → push code → Render detects change → pulls latest → runs build command → runs start command → service updates. Automatic on every push to main"
"What's the database schema initialization process?","1) Create PostgreSQL on Render, 2) Get connection URL, 3) Connect via Web Shell or psql, 4) Run CREATE TABLE statements, 5) Verify with \dt command"
"Why separate start and dev scripts in package.json?","Dev uses nodemon (auto-restart on changes) for development. Start uses node (single run) for production. Render uses 'start', devs use 'dev'"
"What's the pattern for handling API base URLs?","const API_URL = import.meta.env.VITE_API_URL || ''. Use environment variable in production, empty in dev (proxy handles it). Prepend to all axios calls"
"What does Firebase 'No app created' error mean?","initializeApp() wasn't called or env vars are missing. Either hardcoded config (doesn't get env vars) or variables not set on Render. Check import.meta.env values"
"Why does adding env vars trigger rebuild?","Changing environment variables requires rebuilding the app with new values. Vite embeds VITE_* vars at build time, not runtime. New build = new vars"
"What's the danger of committing credentials.json?","Contains private key for Firebase Admin SDK. Anyone with this can impersonate your server, read all data, create users. Must stay secret, never commit"